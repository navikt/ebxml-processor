/*
 * This file was generated by the Gradle 'init' task.
 *
 * The settings file is used to specify which projects to include in your build.
 *
 * Detailed information about configuring a multi-project build in Gradle can be found
 * in the user manual at https://docs.gradle.org/8.1.1/userguide/multi_project_builds.html
 */

rootProject.name = "ebxml-processor"

dependencyResolutionManagement {

    versionCatalogs {
        create("libs") {
            version("kotlin-logging", "7.0.3")
            version("schema-kenerator-serialization", "2.5.0")
            version("kotlinx-serialization", "1.9.0")
            version("ktor-swagger-ui", "5.4.0")
            version("ktor-openapi", "5.4.0")
            version("nimbus-jwt", "9.31")
            version("arrow", "2.0.1")
            version("bouncycastle", "1.76")
            version("exposed", "1.0.0-rc-3")
            version("ktor", "3.0.3")
            version("token-validation-ktor", "5.0.15")
            version("arrow", "1.2.4")
            version("jwt", "4.4.0")
            version("suspendapp", "0.5.0")
            version("kotlin-kafka", "0.4.1")
            version("hoplite", "2.8.2")
            version("logback", "1.5.17")
            version("logstash", "8.0")
            version("fasterxml-jackson", "2.18.2")
            version("adapter-model", "0.0.3")
            version("emottak-utils", "0.3.5")
            version("prometheus", "1.12.4")

            library("edi-adapter-model", "no.nav.helsemelding", "edi-adapter-model").versionRef("adapter-model")
            library("kotlin-logging", "io.github.oshai", "kotlin-logging-jvm").versionRef("kotlin-logging")
            library("schema-kenerator-serialization", "io.github.smiley4", "schema-kenerator-serialization").versionRef("schema-kenerator-serialization")
            library("ktor-swagger-ui", "io.github.smiley4", "ktor-swagger-ui").versionRef("ktor-swagger-ui")
            library("ktor-openapi", "io.github.smiley4", "ktor-openapi").versionRef("ktor-openapi")
            library("ktor-client-logging", "io.ktor", "ktor-client-logging").versionRef("ktor")
            library("nimbus-jwt", "com.nimbusds", "nimbus-jose-jwt").versionRef("nimbus-jwt")
            library("jwt", "com.auth0", "java-jwt").versionRef("jwt")
            library("arrow-functions", "io.arrow-kt", "arrow-functions").versionRef("arrow")
            library("bcpkix-jdk18on", "org.bouncycastle", "bcpkix-jdk18on").versionRef("bouncycastle")
            library("bcprov-jdk18on", "org.bouncycastle", "bcprov-jdk18on").versionRef("bouncycastle")
            library("apache-santuario", "org.apache.santuario:xmlsec:3.0.5")

            library("exposed-core", "org.jetbrains.exposed", "exposed-core").versionRef("exposed")
            library("exposed-dao", "org.jetbrains.exposed", "exposed-dao").versionRef("exposed")
            library("exposed-java-time", "org.jetbrains.exposed", "exposed-java-time").versionRef("exposed")
            library("exposed-jdbc", "org.jetbrains.exposed", "exposed-jdbc").versionRef("exposed")
            library("exposed-json", "org.jetbrains.exposed", "exposed-json").versionRef("exposed")

            library("ktor-server-core", "io.ktor", "ktor-server-core").versionRef("ktor")
            library("ktor-server-core-jvm", "io.ktor", "ktor-server-core-jvm").versionRef("ktor")
            library("ktor-server-netty", "io.ktor", "ktor-server-netty").versionRef("ktor")
            library("ktor-server-call-logging-jvm", "io.ktor", "ktor-server-call-logging-jvm").versionRef("ktor")
            library("ktor-server-content-negotiation", "io.ktor", "ktor-server-content-negotiation").versionRef("ktor")
            library("ktor-client-content-negotiation", "io.ktor", "ktor-client-content-negotiation").versionRef("ktor")
            library("ktor-serialization-kotlinx-json", "io.ktor", "ktor-serialization-kotlinx-json").versionRef("ktor")
            library("ktor-client-core", "io.ktor", "ktor-client-core").versionRef("ktor")
            library("ktor-client-cio", "io.ktor", "ktor-client-cio").versionRef("ktor")
            library("ktor-client-cio-jvm", "io.ktor", "ktor-client-cio-jvm").versionRef("ktor")
            library("ktor-client-auth", "io.ktor", "ktor-client-auth").versionRef("ktor")
            library("ktor-server-auth-jvm", "io.ktor", "ktor-server-auth-jvm").versionRef("ktor")

            library("ktor-server-metrics-micrometer", "io.ktor", "ktor-server-metrics-micrometer").versionRef("ktor")

            library("logback-classic", "ch.qos.logback", "logback-classic").versionRef("logback")
            library("logback-logstash", "net.logstash.logback", "logstash-logback-encoder").versionRef("logstash")

            library("hoplite-core", "com.sksamuel.hoplite", "hoplite-core").versionRef("hoplite")
            library("hoplite-hocon", "com.sksamuel.hoplite", "hoplite-hocon").versionRef("hoplite")

            library("arrow-core", "io.arrow-kt", "arrow-core").versionRef("arrow")
            library("arrow-fx-coroutines", "io.arrow-kt", "arrow-fx-coroutines").versionRef("arrow")
            library("arrow-resilience", "io.arrow-kt", "arrow-resilience").versionRef("arrow")
            library("arrow-suspendapp", "io.arrow-kt", "suspendapp").versionRef("suspendapp")
            library("arrow-suspendapp-ktor", "io.arrow-kt", "suspendapp-ktor").versionRef("suspendapp")

            library("kotlin-kafka", "io.github.nomisrev", "kotlin-kafka").versionRef("kotlin-kafka")

            library("jackson-module-kotlin", "com.fasterxml.jackson.module", "jackson-module-kotlin").versionRef("fasterxml-jackson")
            library("jackson-dataformat-yaml", "com.fasterxml.jackson.dataformat", "jackson-dataformat-yaml").versionRef("fasterxml-jackson")

            library("ebxml-protokoll", "no.nav.emottak:ebxml-protokoll:0.0.7")
            library("emottak-payload-xsd", "no.nav.emottak:emottak-payload-xsd:0.0.11")
            library("emottak-utils", "no.nav.emottak", "emottak-utils").versionRef("emottak-utils")
            library("hikari", "com.zaxxer:HikariCP:5.0.1")
            library("labai-jsr305x-annotations", "com.github.labai:labai-jsr305x-annotations:0.0.2")
            library("jakarta.xml.bind-api", "jakarta.xml.bind:jakarta.xml.bind-api:4.0.0")
            library("token-validation-ktor-v3", "no.nav.security", "token-validation-ktor-v3").versionRef("token-validation-ktor")
            library("flyway-core", "org.flywaydb:flyway-core:9.16.3")
            library("jaxb-runtime", "org.glassfish.jaxb:jaxb-runtime:3.0.2")
            library("jakarta.xml.ws-api", "jakarta.xml.ws:jakarta.xml.ws-api:2.3.3")
            library("ojdbc8", "com.oracle.ojdbc:ojdbc8:19.3.0.0")
            library("guava", "com.google.guava:guava:33.4.0-jre")
            library(
                "micrometer-registry-prometheus",
                "io.micrometer",
                "micrometer-registry-prometheus"
            ).versionRef("prometheus")
            library("kotlinx-serialization-json", "org.jetbrains.kotlinx", "kotlinx-serialization-json").versionRef("kotlinx-serialization")

            bundle("prometheus", listOf("ktor-server-metrics-micrometer", "micrometer-registry-prometheus"))
            bundle("bouncycastle", listOf("bcpkix-jdk18on", "bcprov-jdk18on"))
            bundle("exposed", listOf("exposed-core", "exposed-dao", "exposed-java-time", "exposed-jdbc", "exposed-json"))
            bundle("logging", listOf("logback-classic", "logback-logstash"))
        }

        create("testLibs") {
            version("turbine", "1.2.0")
            version("testcontainers", "1.18.1")
            version("ktor", "3.3.1")
            version("mock-oauth2", "2.1.2")
            version("kotest-extensions", "2.0.2")
            version("arrow", "2.0.0")
            version("junit", "5.9.2")
            version("hamcrest", "2.2")
            version("mockk", "1.13.10")
            version("testPostgres", "1.18.0")
            version("xmlunit", "2.9.1")
            version("ktor-server-test", "3.0.3")
            version("kotest", "5.9.1")
            version("edi-adapter-model", "0.0.3")

            library("edi-adapter-model", "no.nav.helsemelding", "edi-adapter-model").versionRef("edi-adapter-model")
            library("turbine", "app.cash.turbine", "turbine").versionRef("turbine")
            library("testcontainers", "org.testcontainers", "testcontainers").versionRef("testcontainers")
            library("testcontainers-postgresql", "org.testcontainers", "postgresql").versionRef("testcontainers")
            library("ktor-client-mock", "io.ktor", "ktor-client-mock").versionRef("ktor")
            library("mock-oauth2-server", "no.nav.security", "mock-oauth2-server").versionRef("mock-oauth2")
            library(
                "kotest-extensions-testcontainers",
                "io.kotest.extensions",
                "kotest-extensions-testcontainers"
            ).versionRef("kotest-extensions")
            library("kotest-extensions-jvm", "io.kotest", "kotest-extensions-jvm").versionRef("kotest")
            library("kotest-assertions-arrow", "io.kotest.extensions", "kotest-assertions-arrow").versionRef("arrow")
            library("ktor-server-test-host", "io.ktor", "ktor-server-test-host").versionRef("ktor-server-test")
            library("junit-jupiter-api", "org.junit.jupiter", "junit-jupiter-api").versionRef("junit")
            library("junit-jupiter-engine", "org.junit.jupiter", "junit-jupiter-engine").versionRef("junit")
            library("junit-jupiter-params", "org.junit.jupiter", "junit-jupiter-params").versionRef("junit")

            library("hamcrest", "org.hamcrest", "hamcrest").versionRef("hamcrest")

            library("mockk-jvm", "io.mockk", "mockk-jvm").versionRef("mockk")
            library("mockk-dsl-jvm", "io.mockk", "mockk-dsl-jvm").versionRef("mockk")

            library("postgresql", "org.testcontainers", "postgresql").versionRef("testPostgres")

            library("xmlunit-core", "org.xmlunit", "xmlunit-core").versionRef("xmlunit")
            library("xmlunit-matchers", "org.xmlunit", "xmlunit-matchers").versionRef("xmlunit")

            library("kotest-runner-junit5", "io.kotest", "kotest-runner-junit5").versionRef("kotest")
            library("kotest-framework-datatest", "io.kotest", "kotest-framework-datatest").versionRef("kotest")

            bundle("kotest", listOf("kotest-runner-junit5", "kotest-framework-datatest"))
            bundle("mockk", listOf("mockk-jvm", "mockk-dsl-jvm"))
            bundle("xmlunit", listOf("xmlunit-core", "xmlunit-matchers"))
        }
    }

    repositories {
        mavenCentral()
        exclusiveContent {
            // emottak-payload-xsd depends on org.apache.cxf:cxf-rt-ws-security:4.1.4 which depends on opensaml-saml-impl:5.1.6
            // This is not available in maven central
            forRepository {
                maven {
                    name = "Shibboleth"
                    url = uri("https://build.shibboleth.net/maven/releases/")
                }
            }
            filter {
                // Only allow specific group/artifact from Shibboleth
                includeGroup("org.opensaml")
                includeGroup("net.shibboleth")
                // Add more includeGroup or includeModule as needed
            }
        }
        maven {
            name = "Ebxml protokoll"
            url = uri("https://maven.pkg.github.com/navikt/ebxml-protokoll")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
        maven {
            name = "Emottak payload format"
            url = uri("https://maven.pkg.github.com/navikt/emottak-payload-xsd")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
        maven {
            name = "Nav edi-adapter"
            url = uri("https://maven.pkg.github.com/navikt/helsemelding-edi-adapter")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
        maven {
            name = "Nav token-support"
            url = uri("https://maven.pkg.github.com/navikt/token-support")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
        maven {
            name = "Mock OAUTH2 server"
            url = uri("https://maven.pkg.github.com/navikt/mock-oauth2-server")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
        maven {
            name = "Nav edi-adapter"
            url = uri("https://maven.pkg.github.com/navikt/helsemelding-edi-adapter")
            credentials {
                username = "token"
                password = System.getenv("GITHUB_TOKEN")
            }
        }
    }
}

include("felles", "ebxml-processing-model", "cpa-repo", "ebms-provider", "ebms-payload", "ebms-async", "edi-adapter")
